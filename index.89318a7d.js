const e=document.getElementById("hero-random-film"),t=document.getElementById("hero-container");let n;async function o(){const e=await async function(){try{const e=await fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=9073999c285844087924fd0e24160fae"),{results:n}=await e.json(),o=n.map((({id:e})=>e));return t.classList.add("hero-hide"),o}catch(e){console.log("Помилка при виконанні запиту до API:",e)}}(),o=Math.floor(Math.random()*e.length);n=e[o];const i=await a(n);console.log(i);return{filmDetails:i,trailerDetails:await async function(e){const t=`https://api.themoviedb.org/3/movie/${e}/videos?api_key=9073999c285844087924fd0e24160fae`;try{const e=await fetch(t),n=(await e.json()).results.find((e=>"Trailer"===e.type&&"Official Trailer"===e.name)),o=n?`https://www.youtube.com/watch?v=${n.key}`:null;return console.log(o),o}catch(e){console.log("Error occurred while making API request:",e)}}(n)}}async function a(e){const t=`https://api.themoviedb.org/3/movie/${e}?api_key=9073999c285844087924fd0e24160fae`;try{const e=await fetch(t);return await e.json()}catch(e){console.log("Error occurred while making API request:",e)}}window.addEventListener("DOMContentLoaded",(async()=>{let t=[];const n=localStorage.getItem("libraryFilms");n?t=JSON.parse(n):localStorage.setItem("libraryFilms",JSON.stringify(t));const{filmDetails:a,trailerDetails:i}=await o(),l=function(e,t){const{backdrop_path:n,title:o,vote_average:a,overview:i}=e,r=i.split(" ");let l=r.slice(0,30).join(" ");return r.length>30&&(l+="..."),`\n    <section class="hero-section">\n    <div class="container hero-container" style="background-image: linear-gradient(\n      86.77deg,\n      #111111 30.38%,\n      rgba(17, 17, 17, 0) 65.61%\n    ), url(https://image.tmdb.org/t/p/original/${n});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;">\n        <h1 class="hero-title">${o}</h1>\n        <div class="hero-rating">\n          <div class="hero-rating__body">\n            <div class="hero-rating__active" style="width: ${10*a.toFixed(1)}%;"></div>\n            <div class="hero-rating__items">\n              <input type="radio" class="hero-rating__item" name="rating" value="1">\n              <input type="radio" class="hero-rating__item" name="rating" value="2">\n              <input type="radio" class="hero-rating__item" name="rating" value="3">\n              <input type="radio" class="hero-rating__item" name="rating" value="4">\n              <input type="radio" class="hero-rating__item" name="rating" value="5">\n            </div>\n          </div>\n        </div>\n        <p class="hero-text">${l}</p>\n        <div class="hero-homepage-buttons">\n        <button id="watchTrailerButton" class="button-watch-trailer"><a class="hero-href" href="${t}">Watch trailer</a></button>\n        <button id="moreDetailsButton" class="button-more-details">More Details</button>\n        </div>\n      </div>\n    </section>\n  `}(a,i);var s;s=l,e.innerHTML=s;document.getElementById("watchTrailerButton").addEventListener("click",r);document.getElementById("moreDetailsButton").addEventListener("click",m)}));const i=document.getElementById("myModal");function r(){i.classList.toggle("m-w-t-is-hidden"),document.addEventListener("keydown",s),window.addEventListener("click",c),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"}function l(){i.classList.toggle("m-w-t-is-hidden"),document.removeEventListener("keydown",s),window.removeEventListener("click",c),h()}function s(e){"Escape"===e.key&&l()}function c(e){e.target===i&&l()}document.getElementById("closeModal").addEventListener("click",l);const d=document.getElementById("moreDetails");document.getElementById("closeDetails");async function m(){document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",d.classList.toggle("more-details-is-hidden"),document.addEventListener("keydown",g),window.addEventListener("click",v);const e=function({title:e,overview:t,vote_average:n,vote_count:o,popularity:a,genres:i,poster_path:r}){let l="Add to My Library";const s=JSON.parse(localStorage.getItem("libraryFilms"));for(const t of s)t.title===e&&(l="Remove from My Library");return`\n    <div class="more-details-modal">\n      <div class="close-button-box">\n        <button class="more-details-close-button" id="closeDetails" type="button">X\n       </button>\n      </div>\n      <div class="details-wrapper">\n\n      <div class="more-details-img-box">\n        <img width="248px" class="more-detail-img" src="https://image.tmdb.org/t/p/original/${r}" alt="${e}" />\n      </div>\n      \n      <div class="more-details-info">\n        <h2 class="film-title-modal film-title">${e}</h2>\n\n        <table>\n        <tr>\n          <td class="table-row table-column-name">Vote / Votes:</td>\n          <td ><span class="vote-average">${n.toFixed(1)}</span> /\n          <span class="vote-count">${o}</span>\n       </td>\n        </tr>\n        <tr>\n          <td class="table-row table-column-name">Popularity:</td>\n          <td>${a.toFixed(1)}</td>\n        </tr>\n        <tr>\n        <td class="table-row table-column-name">Genre:</td>\n        <td >${i.map((e=>e.name)).join(", ")}</td>\n      </tr>\n      </table>\n\n               <span class="description-about">About:</span>\n        <span class="more-details-about">${t}</span>\n\n        <div class="more-details-adml-box">\n        <button id="addToLibraryButton" class="button-rem-me">${l}</button>\n      </div>\n      </div> \n\n      </div>\n     </div>\n    </div>\n  `}(await a(n));var t;if(t=e,b(),d.insertAdjacentHTML("afterbegin",t),"dark"===localStorage.getItem("ui-theme"));else{document.querySelector(".more-details-modal").style.backgroundColor="#FFFFFF",document.querySelector(".more-details-modal").style.boxShadow="1px 1px 14px 4px rgba(0, 0, 0, 0.22)",document.querySelector(".more-details-close-button").style.color="#282828",document.querySelector(".film-title").style.color="#111111",document.querySelector(".more-details-about").style.color="#282828",document.querySelector(".description-about").style.color="#111111";const e=[...document.getElementsByTagName("td")];for(let t of e)t.style.color="#111111"}document.getElementById("closeDetails").addEventListener("click",y),document.getElementById("addToLibraryButton").addEventListener("click",u)}async function u(){const e=document.querySelector(".button-rem-me"),t=await a(n),o=function(){let e=[];const t=localStorage.getItem("libraryFilms");t?e=JSON.parse(t):localStorage.setItem("libraryFilms",JSON.stringify(e));return e}();if("Add to My Library"===e.textContent){e.textContent="Remove from My Library";-1===o.findIndex((e=>e.title===t.title))&&(o.push(t),localStorage.setItem("libraryFilms",JSON.stringify(o)))}else{e.textContent="Add to My Library";const n=o.findIndex((e=>e.title===t.title));-1!==n&&(o.splice(n,1),localStorage.setItem("libraryFilms",JSON.stringify(o)))}}function y(){document.body.style.overflow="",document.documentElement.style.overflow="",h(),d.classList.toggle("more-details-is-hidden"),document.removeEventListener("keydown",g),window.removeEventListener("click",v),detailsOpened=!1,b()}function g(e){"Escape"===e.key&&y()}function v(e){e.target===d&&y()}function b(){d.innerHTML=""}function h(){document.body.style.overflow="",document.documentElement.style.overflow=""}
//# sourceMappingURL=index.89318a7d.js.map
