{"mappings":"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","sources":["src/js/hero-homepage/hero-homepage.js"],"sourcesContent":["const heroRandomFilm = document.getElementById('hero-random-film');\nconst heroContainer = document.getElementById('hero-container');\nconst apiKey = '9073999c285844087924fd0e24160fae';\nlet randomFilmIndex;\nlet filmDetails;\nlet trailerDetails;\n\nasync function fetchFilmData() {\n  const apiUrl = `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const { results } = await response.json();\n    const filmIndexes = results.map(({ id }) => id);\n    heroContainer.classList.add('hero-hide');\n    return filmIndexes;\n  } catch (error) {\n    console.log('Помилка при виконанні запиту до API:', error);\n  }\n}\n\nasync function getRandomFilm() {\n  const filmIndexes = await fetchFilmData();\n  const randomIndex = Math.floor(Math.random() * filmIndexes.length);\n  randomFilmIndex = filmIndexes[randomIndex];\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n  console.log(filmDetails);\n  ////!!!!\n  const trailerDetails = await getTrailerDetails(randomFilmIndex);\n\n  return { filmDetails, trailerDetails };\n}\n\nasync function getFilmDetails(filmIndex) {\n  const apiUrl = `https://api.themoviedb.org/3/movie/${filmIndex}?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const filmDetails = await response.json();\n    return filmDetails;\n  } catch (error) {\n    console.log('Error occurred while making API request:', error);\n  }\n}\n\n// https://api.themoviedb.org/3/movie/385687/videos?api_key=9073999c285844087924fd0e24160fae\n\n////!!!!\nasync function getTrailerDetails(filmIndex) {\n  const apiUrl = `https://api.themoviedb.org/3/movie/${filmIndex}/videos?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const trailerDetails = await response.json();\n    const officialTrailer = trailerDetails.results.find(\n      video => video.type === 'Trailer' && video.name === 'Official Trailer'\n    );\n    const officialTrailerUrl = officialTrailer\n      ? `https://www.youtube.com/watch?v=${officialTrailer.key}`\n      : null;\n    console.log(officialTrailerUrl);\n    return officialTrailerUrl;\n  } catch (error) {\n    console.log('Error occurred while making API request:', error);\n  }\n}\n\nfunction createFilmBox(filmDetails, officialTrailerUrl) {\n  const { backdrop_path, title, vote_average, overview } = filmDetails;\n\n  const words = overview.split(' ');\n  let truncatedOverview = words.slice(0, 30).join(' ');\n\n  if (words.length > 30) {\n    truncatedOverview += '...';\n  }\n\n  return `\n    <section class=\"hero-section\">\n    <div class=\"container hero-container\" style=\"background-image: linear-gradient(\n      86.77deg,\n      #111111 30.38%,\n      rgba(17, 17, 17, 0) 65.61%\n    ), url(https://image.tmdb.org/t/p/original/${backdrop_path});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\">\n        <h1 class=\"hero-title\">${title}</h1>\n        <div class=\"hero-rating\">\n          <div class=\"hero-rating__body\">\n            <div class=\"hero-rating__active\" style=\"width: ${\n              vote_average.toFixed(1) * 10\n            }%;\"></div>\n            <div class=\"hero-rating__items\">\n              <input type=\"radio\" class=\"hero-rating__item\" name=\"rating\" value=\"1\">\n              <input type=\"radio\" class=\"hero-rating__item\" name=\"rating\" value=\"2\">\n              <input type=\"radio\" class=\"hero-rating__item\" name=\"rating\" value=\"3\">\n              <input type=\"radio\" class=\"hero-rating__item\" name=\"rating\" value=\"4\">\n              <input type=\"radio\" class=\"hero-rating__item\" name=\"rating\" value=\"5\">\n            </div>\n          </div>\n        </div>\n        <p class=\"hero-text\">${truncatedOverview}</p>\n        <div class=\"hero-homepage-buttons\">\n        <button id=\"watchTrailerButton\" class=\"button-watch-trailer\"><a class=\"hero-href\" href=\"${officialTrailerUrl}\">Watch trailer</a></button>\n        <button id=\"moreDetailsButton\" class=\"button-more-details\">More Details</button>\n        </div>\n      </div>\n    </section>\n  `;\n}\n\nfunction createHTML(markup) {\n  heroRandomFilm.innerHTML = markup;\n}\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  let libraryFilms = [];\n  const libraryFilmsString = localStorage.getItem('libraryFilms');\n  if (libraryFilmsString) {\n    libraryFilms = JSON.parse(libraryFilmsString);\n  } else {\n    localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n  }\n\n \n  const { filmDetails, trailerDetails } = await getRandomFilm();\n\n\n  const filmBoxHTML = createFilmBox(filmDetails, trailerDetails);\n  createHTML(filmBoxHTML);\n\n  const watchTrailerButton = document.getElementById('watchTrailerButton');\n  watchTrailerButton.addEventListener('click', openModal);\n\n  const watchDetailsButton = document.getElementById('moreDetailsButton');\n  watchDetailsButton.addEventListener('click', openDetails);\n});\n\nconst modalHero = document.getElementById('myModal');\nconst closeTrailerButton = document.getElementById('closeModal');\ncloseTrailerButton.addEventListener('click', closeModal);\n\nfunction openModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.addEventListener('keydown', escapeHandler);\n  window.addEventListener('click', outsideClickHandler);\n  disableScroll();\n}\n\nfunction closeModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.removeEventListener('keydown', escapeHandler);\n  window.removeEventListener('click', outsideClickHandler);\n  enableScroll();\n}\n\nfunction escapeHandler(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction outsideClickHandler(event) {\n  if (event.target === modalHero) {\n    closeModal();\n  }\n}\n\n// modal for More details\nconst modalDetails = document.getElementById('moreDetails');\n\nfunction createDetailsBox({\n  title,\n  overview,\n  vote_average,\n  vote_count,\n  popularity,\n  genres,\n  poster_path,\n}) {\n  let btn = 'Add to My Library';\n  const library = JSON.parse(localStorage.getItem('libraryFilms'));\n\n  for (const film of library) {\n    if (film.title === title) {\n      btn = 'Remove from My Library';\n    }\n  }\n\n  const detailsBoxHTML = `\n    <div class=\"more-details-modal\">\n      <div class=\"close-button-box\">\n        <button class=\"more-details-close-button\" id=\"closeDetails\" type=\"button\">X\n       </button>\n      </div>\n      <div class=\"details-wrapper\">\n\n      <div class=\"more-details-img-box\">\n        <img width=\"248px\" class=\"more-detail-img\" src=\"https://image.tmdb.org/t/p/original/${poster_path}\" alt=\"${title}\" />\n      </div>\n      \n      <div class=\"more-details-info\">\n        <h2 class=\"film-title-modal film-title\">${title}</h2>\n\n        <table>\n        <tr>\n          <td class=\"table-row table-column-name\">Vote / Votes:</td>\n          <td ><span class=\"vote-average\">${vote_average.toFixed(1)}</span> /\n          <span class=\"vote-count\">${vote_count}</span>\n       </td>\n        </tr>\n        <tr>\n          <td class=\"table-row table-column-name\">Popularity:</td>\n          <td>${popularity.toFixed(1)}</td>\n        </tr>\n        <tr>\n        <td class=\"table-row table-column-name\">Genre:</td>\n        <td >${genres.map(genre => genre.name).join(', ')}</td>\n      </tr>\n      </table>\n\n               <span class=\"description-about\">About:</span>\n        <span class=\"more-details-about\">${overview}</span>\n\n        <div class=\"more-details-adml-box\">\n        <button id=\"addToLibraryButton\" class=\"button-rem-me\">${btn}</button>\n      </div>\n      </div> \n\n      </div>\n     </div>\n    </div>\n  `;\n\n  return detailsBoxHTML;\n}\n\nconst closeDetailsButton = document.getElementById('closeDetails');\n\nfunction createMoreDetails(markup) {\n  clearDetailsBox();\n  modalDetails.insertAdjacentHTML('afterbegin', markup);\n}\n\nasync function openDetails() {\n  document.body.style.overflow = 'hidden';\n  document.documentElement.style.overflow = 'hidden';\n\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.addEventListener('keydown', escapeHandlerDetails);\n  window.addEventListener('click', outsideClickHandlerDetails);\n\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n  const detailsBoxHTML = createDetailsBox(filmDetails);\n  createMoreDetails(detailsBoxHTML);\n  if (localStorage.getItem('ui-theme') === 'dark') {\n  } else {\n    document.querySelector('.more-details-modal').style.backgroundColor =\n      '#FFFFFF';\n    document.querySelector('.more-details-modal').style.boxShadow =\n      '1px 1px 14px 4px rgba(0, 0, 0, 0.22)';\n    document.querySelector('.more-details-close-button').style.color =\n      '#282828';\n    document.querySelector('.film-title').style.color = '#111111';\n    document.querySelector('.more-details-about').style.color = '#282828';\n    document.querySelector('.description-about').style.color = '#111111';\n    const aboutTableEl = [...document.getElementsByTagName('td')];\n    for (let element of aboutTableEl) {\n      element.style.color = '#111111';\n    }\n  }\n\n  document\n    .getElementById('closeDetails')\n    .addEventListener('click', closeDetails);\n\n  document\n    .getElementById('addToLibraryButton')\n    .addEventListener('click', toggleLibraryFilm);\n}\n\nasync function toggleLibraryFilm() {\n  const addButton = document.querySelector('.button-rem-me');\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n  const libraryFilms = getLibraryFilms();\n\n  if (addButton.textContent === 'Add to My Library') {\n    addButton.textContent = 'Remove from My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index === -1) {\n      libraryFilms.push(filmDetails);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  } else {\n    addButton.textContent = 'Add to My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index !== -1) {\n      libraryFilms.splice(index, 1);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  }\n}\n\nfunction getLibraryFilms() {\n  let libraryFilms = [];\n  const libraryFilmsString = localStorage.getItem('libraryFilms');\n  if (libraryFilmsString) {\n    libraryFilms = JSON.parse(libraryFilmsString);\n  } else {\n    localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n  }\n  return libraryFilms;\n}\n\nfunction closeDetails() {\n  document.body.style.overflow = '';\n  document.documentElement.style.overflow = '';\n\n  enableScroll();\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.removeEventListener('keydown', escapeHandlerDetails);\n  window.removeEventListener('click', outsideClickHandlerDetails);\n  detailsOpened = false;\n  clearDetailsBox();\n}\n\nfunction escapeHandlerDetails(event) {\n  if (event.key === 'Escape') {\n    closeDetails();\n  }\n}\n\nfunction outsideClickHandlerDetails(event) {\n  if (event.target === modalDetails) {\n    closeDetails();\n  }\n}\n\nfunction clearDetailsBox() {\n  modalDetails.innerHTML = '';\n}\n\nfunction disableScroll() {\n  document.body.style.overflow = 'hidden';\n  document.documentElement.style.overflow = 'hidden';\n}\n\nfunction enableScroll() {\n  document.body.style.overflow = '';\n  document.documentElement.style.overflow = '';\n}\n"],"names":["$675cca1e6dc735c6$var$heroRandomFilm","document","getElementById","$675cca1e6dc735c6$var$heroContainer","$675cca1e6dc735c6$var$randomFilmIndex","async","$675cca1e6dc735c6$var$getRandomFilm","filmIndexes","response","fetch","results","json","map","id","classList","add","error","console","log","$675cca1e6dc735c6$var$fetchFilmData","randomIndex","Math","floor","random","length","filmDetails1","$675cca1e6dc735c6$var$getFilmDetails","filmDetails","trailerDetails","filmIndex","apiUrl","officialTrailer","find","video","type","name","officialTrailerUrl","key","$675cca1e6dc735c6$var$getTrailerDetails","window","addEventListener","libraryFilms","libraryFilmsString","localStorage","getItem","JSON","parse","setItem","stringify","filmDetails4","trailerDetails3","filmBoxHTML","filmDetails3","backdrop_path","title","vote_average","overview","words","split","truncatedOverview","slice","join","toFixed","$675cca1e6dc735c6$var$createFilmBox","markup","innerHTML","$675cca1e6dc735c6$var$openModal","$675cca1e6dc735c6$var$openDetails","$675cca1e6dc735c6$var$modalHero","toggle","$675cca1e6dc735c6$var$escapeHandler","$675cca1e6dc735c6$var$outsideClickHandler","body","style","overflow","documentElement","$675cca1e6dc735c6$var$closeModal","removeEventListener","$675cca1e6dc735c6$var$enableScroll","event","target","$675cca1e6dc735c6$var$modalDetails","$675cca1e6dc735c6$var$escapeHandlerDetails","$675cca1e6dc735c6$var$outsideClickHandlerDetails","detailsBoxHTML","vote_count","popularity","genres","poster_path","btn","library","film","genre","$675cca1e6dc735c6$var$createDetailsBox","$675cca1e6dc735c6$var$clearDetailsBox","insertAdjacentHTML","querySelector","backgroundColor","boxShadow","color","aboutTableEl","getElementsByTagName","element","$675cca1e6dc735c6$var$closeDetails","$675cca1e6dc735c6$var$toggleLibraryFilm","addButton","filmDetails6","$675cca1e6dc735c6$var$getLibraryFilms","textContent","findIndex","push","index","splice","detailsOpened"],"version":3,"file":"index.89318a7d.js.map"}