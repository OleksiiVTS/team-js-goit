{"mappings":"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","sources":["src/js/hero-homepage/hero-homepage.js"],"sourcesContent":["const heroRandomFilm = document.getElementById('hero-random-film');\nconst heroContainer = document.getElementById('hero-container');\nconst apiKey = '9073999c285844087924fd0e24160fae';\nlet randomFilmIndex;\n\nasync function fetchFilmData() {\n  const apiUrl = `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const { results } = await response.json();\n    const filmIndexes = results.map(({ id }) => id);\n    heroContainer.classList.add('hero-hide');\n    return filmIndexes;\n  } catch (error) {\n    console.log('Помилка при виконанні запиту до API:', error);\n  }\n}\n\nlet filmDetails;\n\nasync function getRandomFilm() {\n  const filmIndexes = await fetchFilmData();\n  const randomIndex = Math.floor(Math.random() * filmIndexes.length);\n  randomFilmIndex = filmIndexes[randomIndex];\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n\n  return filmDetails;\n}\n\nasync function getFilmDetails(filmIndex) {\n  const apiUrl = `https://api.themoviedb.org/3/movie/${filmIndex}?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n\n    const {\n      title,\n      trailer_key: filmTrailer,\n      backdrop_path: filmBackgroundPath,\n      overview,\n      vote_average,\n      vote_count,\n      release_date,\n      popularity,\n      genres,\n    } = await response.json();\n\n    const filmTrailerUrl = `https://www.youtube.com/watch?v=${filmTrailer}`;\n    const filmBackgroundImage = `https://image.tmdb.org/t/p/original${filmBackgroundPath}`;\n\n    return {\n      title,\n      trailer: filmTrailerUrl,\n      backgroundImage: filmBackgroundImage,\n      overview,\n      vote_average,\n      vote_count,\n      release_date,\n      popularity,\n      genres,\n    };\n  } catch (error) {\n    console.log('Error occurred while making API request:', error);\n  }\n}\n\nfunction createFilmBox({ title, popularity, backgroundImage, overview }) {\n  const words = overview.split(' ');\n  let truncatedOverview = words.slice(0, 30).join(' ');\n\n  if (words.length > 30) {\n    truncatedOverview += '...';\n  }\n\n  return `\n    <section class=\"hero-section\">\n    <div class=\"container hero-container\" style=\"background-image: linear-gradient(\n      86.77deg,\n      #111111 30.38%,\n      rgba(17, 17, 17, 0) 65.61%\n    ), url(${backgroundImage});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\">\n        <h1 class=\"hero-title\">${title}</h1>\n        <p class=\"hero-text\">Рейтинг: ${popularity}</p>\n        <p class=\"hero-text\">${truncatedOverview}</p>\n        <div class=\"hero-homepage-buttons\">\n          <button id=\"watchTrailerButton\" class=\"button-watch-trailer\">Watch trailer</button>\n          <button id=\"moreDetailsButton\" class=\"button-more-details\">More Details</button>\n        </div>\n      </div>\n    </section>\n  `;\n}\n\nfunction createHTML(markup) {\n  heroRandomFilm.insertAdjacentHTML('afterbegin', markup);\n}\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  const filmDetails = await getRandomFilm();\n  const filmBoxHTML = createFilmBox(filmDetails);\n  createHTML(filmBoxHTML);\n\n  const watchTrailerButton = document.getElementById('watchTrailerButton');\n  watchTrailerButton.addEventListener('click', openModal);\n\n  const watchDetailsButton = document.getElementById('moreDetailsButton');\n  watchDetailsButton.addEventListener('click', openDetails);\n});\n\nconst modalHero = document.getElementById('myModal');\nconst closeTrailerButton = document.getElementById('closeModal');\ncloseTrailerButton.addEventListener('click', closeModal);\n\nfunction openModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.addEventListener('keydown', escapeHandler);\n  window.addEventListener('click', outsideClickHandler);\n}\n\nfunction closeModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.removeEventListener('keydown', escapeHandler);\n  window.removeEventListener('click', outsideClickHandler);\n}\n\nfunction escapeHandler(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction outsideClickHandler(event) {\n  if (event.target === modalHero) {\n    closeModal();\n  }\n}\n\n// modal for More details\nconst modalDetails = document.getElementById('moreDetails');\n\nfunction createDetailsBox({\n  title,\n  backgroundImage,\n  overview,\n  vote_average,\n  vote_count,\n  release_date,\n  popularity,\n  genres,\n}) {\n  let btn = 'Add to My Library';\n  const library = JSON.parse(localStorage.getItem('libraryFilms'));\n\n  for (const film of library) {\n\n    if (film.title === title) {\n      btn = 'Remove from My Library';\n    }\n  }\n\n  const detailsBoxHTML = `\n    <div class=\"more-details-modal\">\n      <div class=\"close-button-box\">\n        <button id=\"closeDetails\" type=\"button\">X</button>\n      </div>\n      <div class=\"more-details-img-box\">\n        <img class=\"more-detail-img\" src=\"https://image.tmdb.org/t/p/original/${backgroundImage}\" alt=\"${title}\" />\n      </div>\n      <div class=\"more-details-info\">\n        <h2 class=\"film-title\">${title}</h2>\n        <span class=\"release\">Release Date:</span>\n        <span class=\"release-value release-date\">${release_date}</span>\n        <span class=\"vote\">Vote / Votes:</span>\n        <span class=\"vote-value\">\n          <span class=\"vote-average\">${vote_average}</span> /\n          <span class=\"vote-count\">${vote_count}</span>\n        </span>\n        <span class=\"popularity\">Popularity:</span>\n        <span class=\"popularity-value\">${popularity}</span>\n        <span class=\"genre\">Genre:</span>\n        <span class=\"genre-value\">${genres\n          .map(genre => genre.name)\n          .join(', ')}</span>\n        <span class=\"description-about\">About:</span>\n        <span class=\"about-value\">${overview}</span>\n      </div>\n      <div class=\"more-details-adml-box\">\n        <button id=\"addToLibraryButton\" class=\"button-rem-me\">${btn}</button>\n      </div>\n    </div>\n  `;\n\n  return detailsBoxHTML;\n}\n\nconst closeDetailsButton = document.getElementById('closeDetails');\n\nfunction createMoreDetails(markup) {\n  clearDetailsBox();\n  modalDetails.insertAdjacentHTML('afterbegin', markup);\n}\n\nasync function openDetails() {\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.addEventListener('keydown', escapeHandlerDetails);\n  window.addEventListener('click', outsideClickHandlerDetails);\n\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n\n  const detailsBoxHTML = createDetailsBox(filmDetails);\n  createMoreDetails(detailsBoxHTML);\n\n  document\n    .getElementById('closeDetails')\n    .addEventListener('click', closeDetails);\n\n  document\n    .getElementById('addToLibraryButton')\n    .addEventListener('click', toggleLibraryFilm);\n}\n\nasync function toggleLibraryFilm() {\n  const addButton = document.querySelector('.button-rem-me');\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n  const libraryFilms = getLibraryFilms();\n\n  if (addButton.textContent === 'Add to My Library') {\n    addButton.textContent = 'Remove from My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index === -1) {\n      libraryFilms.push(filmDetails);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  } else {\n    addButton.textContent = 'Add to My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index !== -1) {\n      libraryFilms.splice(index, 1);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  }\n}\n\nfunction getLibraryFilms() {\n  const libraryFilmsString = localStorage.getItem('libraryFilms');\n  if (libraryFilmsString) {\n    return JSON.parse(libraryFilmsString);\n  } else {\n    return [];\n  }\n}\n\nfunction closeDetails() {\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.removeEventListener('keydown', escapeHandlerDetails);\n  window.removeEventListener('click', outsideClickHandlerDetails);\n  detailsOpened = false;\n  clearDetailsBox();\n}\n\nfunction escapeHandlerDetails(event) {\n  if (event.key === 'Escape') {\n    closeDetails();\n  }\n}\n\nfunction outsideClickHandlerDetails(event) {\n  if (event.target === modalDetails) {\n    closeDetails();\n  }\n}\n\nfunction clearDetailsBox() {\n  modalDetails.innerHTML = '';\n}\n"],"names":["$9bcabb25731c3ee1$var$randomFilmIndex","$bpxeT","parcelRequire","$9bcabb25731c3ee1$var$heroRandomFilm","document","getElementById","$9bcabb25731c3ee1$var$heroContainer","$9bcabb25731c3ee1$var$apiKey","$9bcabb25731c3ee1$var$fetchFilmData","$9bcabb25731c3ee1$var$_fetchFilmData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","apiUrl","response","results","filmIndexes","concat","fetch","_ctx","sent","json","map","param","id","classList","add","console","log","t0","$9bcabb25731c3ee1$var$getRandomFilm","$9bcabb25731c3ee1$var$_getRandomFilm","randomIndex","filmDetails1","Math","floor","random","length","$9bcabb25731c3ee1$var$getFilmDetails","filmIndex","$9bcabb25731c3ee1$var$_getFilmDetails","ref","title","filmTrailer","filmBackgroundPath","overview","vote_average","vote_count","release_date","popularity","genres","filmTrailerUrl","filmBackgroundImage","trailer_key","backdrop_path","trailer","backgroundImage","window","addEventListener","filmDetails2","filmBoxHTML","words","truncatedOverview","split","slice","join","markup","insertAdjacentHTML","$9bcabb25731c3ee1$var$openModal","$9bcabb25731c3ee1$var$openDetails","$9bcabb25731c3ee1$var$modalHero","toggle","$9bcabb25731c3ee1$var$escapeHandler","$9bcabb25731c3ee1$var$outsideClickHandler","$9bcabb25731c3ee1$var$closeModal","removeEventListener","event","key","target","$9bcabb25731c3ee1$var$modalDetails","$9bcabb25731c3ee1$var$createDetailsBox","btn","library","JSON","parse","localStorage","getItem","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","return","genre","name","$9bcabb25731c3ee1$var$createMoreDetails","$9bcabb25731c3ee1$var$clearDetailsBox","$9bcabb25731c3ee1$var$_openDetails","filmDetails3","$9bcabb25731c3ee1$var$escapeHandlerDetails","$9bcabb25731c3ee1$var$outsideClickHandlerDetails","$9bcabb25731c3ee1$var$closeDetails","$9bcabb25731c3ee1$var$toggleLibraryFilm","$9bcabb25731c3ee1$var$_toggleLibraryFilm","addButton","filmDetails4","libraryFilms","index1","querySelector","$9bcabb25731c3ee1$var$getLibraryFilms","textContent","findIndex","film","push","setItem","stringify","splice","libraryFilmsString","detailsOpened","innerHTML"],"version":3,"file":"index.262427d2.js.map"}