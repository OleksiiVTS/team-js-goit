{"mappings":"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","sources":["src/js/hero-homepage/hero-homepage.js"],"sourcesContent":["const heroRandomFilm = document.getElementById('hero-random-film');\nconst heroContainer = document.getElementById('hero-container');\nconst apiKey = '9073999c285844087924fd0e24160fae';\nlet randomFilmIndex;\n\nasync function fetchFilmData() {\n  const apiUrl = `https://api.themoviedb.org/3/trending/movie/day?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const { results } = await response.json();\n    const filmIndexes = results.map(({ id }) => id);\n    heroContainer.classList.add('hero-hide');\n    return filmIndexes;\n  } catch (error) {\n    console.log('Помилка при виконанні запиту до API:', error);\n  }\n}\n\nlet filmDetails;\n\nasync function getRandomFilm() {\n  const filmIndexes = await fetchFilmData();\n  const randomIndex = Math.floor(Math.random() * filmIndexes.length);\n  randomFilmIndex = filmIndexes[randomIndex];\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n\n  // console.log(filmDetails);\n  return filmDetails;\n}\n\nasync function getFilmDetails(filmIndex) {\n  const apiUrl = `https://api.themoviedb.org/3/movie/${filmIndex}?api_key=${apiKey}`;\n\n  try {\n    const response = await fetch(apiUrl);\n    const {\n      title,\n      trailer_key: filmTrailer,\n      backdrop_path: filmBackgroundPath,\n      overview,\n      vote_average,\n      vote_count,\n      release_date,\n      popularity,\n      genres,\n    } = await response.json();\n\n    const filmTrailerUrl = `https://www.youtube.com/watch?v=${filmTrailer}`;\n    const filmBackgroundImage = `https://image.tmdb.org/t/p/original${filmBackgroundPath}`;\n\n    return {\n      title,\n      trailer: filmTrailerUrl,\n      backgroundImage: filmBackgroundImage,\n      overview,\n      vote_average,\n      vote_count,\n      release_date,\n      popularity,\n      genres,\n    };\n  } catch (error) {\n    console.log('Error occurred while making API request:', error);\n  }\n}\n\nfunction createFilmBox({ title, popularity, backgroundImage, overview }) {\n  const words = overview.split(' ');\n  let truncatedOverview = words.slice(0, 30).join(' ');\n\n  if (words.length > 30) {\n    truncatedOverview += '...';\n  }\n\n  return `\n    <section class=\"hero-section\">\n    <div class=\"container hero-container\" style=\"background-image: linear-gradient(\n      86.77deg,\n      #111111 30.38%,\n      rgba(17, 17, 17, 0) 65.61%\n    ), url(${backgroundImage});\n    background-repeat: no-repeat;\n    background-position: center;\n    background-size: cover;\">\n        <h1 class=\"hero-title\">${title}</h1>\n        <p class=\"hero-text\">Рейтинг: ${popularity}</p>\n        <p class=\"hero-text\">${truncatedOverview}</p>\n        <div class=\"hero-homepage-buttons\">\n          <button id=\"watchTrailerButton\" class=\"button-watch-trailer\">Watch trailer</button>\n          <button id=\"moreDetailsButton\" class=\"button-more-details\">More Details</button>\n        </div>\n      </div>\n    </section>\n  `;\n}\n\nfunction createHTML(markup) {\n  heroRandomFilm.insertAdjacentHTML('afterbegin', markup);\n}\n\nwindow.addEventListener('DOMContentLoaded', async () => {\n  const filmDetails = await getRandomFilm();\n  const filmBoxHTML = createFilmBox(filmDetails);\n  createHTML(filmBoxHTML);\n\n  const watchTrailerButton = document.getElementById('watchTrailerButton');\n  watchTrailerButton.addEventListener('click', openModal);\n\n  const watchDetailsButton = document.getElementById('moreDetailsButton');\n  watchDetailsButton.addEventListener('click', openDetails);\n});\n\nconst modalHero = document.getElementById('myModal');\nconst closeTrailerButton = document.getElementById('closeModal');\ncloseTrailerButton.addEventListener('click', closeModal);\n\nfunction openModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.addEventListener('keydown', escapeHandler);\n  window.addEventListener('click', outsideClickHandler);\n}\n\nfunction closeModal() {\n  modalHero.classList.toggle('m-w-t-is-hidden');\n  document.removeEventListener('keydown', escapeHandler);\n  window.removeEventListener('click', outsideClickHandler);\n}\n\nfunction escapeHandler(event) {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n}\n\nfunction outsideClickHandler(event) {\n  if (event.target === modalHero) {\n    closeModal();\n  }\n}\n\n// modal for More details\nconst modalDetails = document.getElementById('moreDetails');\n\nfunction createDetailsBox({\n  title,\n  backgroundImage,\n  overview,\n  vote_average,\n  vote_count,\n  release_date,\n  popularity,\n  genres,\n}) {\n  const detailsBoxHTML = `\n    <div class=\"more-details-modal\">\n      <div class=\"close-button-box\">\n        <button id=\"closeDetails\" type=\"button\">X</button>\n      </div>\n      <div class=\"more-details-img-box\">\n        <img class=\"more-detail-img\" src=\"https://image.tmdb.org/t/p/original/${backgroundImage}\" alt=\"${title}\" />\n      </div>\n      <div class=\"more-details-info\">\n        <h2 class=\"film-title\">${title}</h2>\n        <span class=\"release\">Release Date:</span>\n        <span class=\"release-value release-date\">${release_date}</span>\n        <span class=\"vote\">Vote / Votes:</span>\n        <span class=\"vote-value\">\n          <span class=\"vote-average\">${vote_average}</span> /\n          <span class=\"vote-count\">${vote_count}</span>\n        </span>\n        <span class=\"popularity\">Popularity:</span>\n        <span class=\"popularity-value\">${popularity}</span>\n        <span class=\"genre\">Genre:</span>\n        <span class=\"genre-value\">${genres\n          .map(genre => genre.name)\n          .join(', ')}</span>\n        <span class=\"description-about\">About:</span>\n        <span class=\"about-value\">${overview}</span>\n      </div>\n      <div class=\"more-details-adml-box\">\n        <button id=\"addToLibraryButton\" class=\"button-rem-me\">Add to My Library</button>\n      </div>\n    </div>\n  `;\n\n  return detailsBoxHTML;\n}\n\nconst closeDetailsButton = document.getElementById('closeDetails');\n\nfunction createMoreDetails(markup) {\n  clearDetailsBox();\n  modalDetails.insertAdjacentHTML('afterbegin', markup);\n}\n\nasync function openDetails() {\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.addEventListener('keydown', escapeHandlerDetails);\n  window.addEventListener('click', outsideClickHandlerDetails);\n\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n\n  const detailsBoxHTML = createDetailsBox(filmDetails);\n  createMoreDetails(detailsBoxHTML);\n\n  document\n    .getElementById('closeDetails')\n    .addEventListener('click', closeDetails);\n\n  document\n    .getElementById('addToLibraryButton')\n    .addEventListener('click', toggleLibraryFilm);\n}\n\nasync function toggleLibraryFilm() {\n  const addButton = document.querySelector('.button-rem-me');\n  const filmDetails = await getFilmDetails(randomFilmIndex);\n  const libraryFilms = getLibraryFilms();\n\n  if (addButton.textContent === 'Add to My Library') {\n    addButton.textContent = 'Remove from My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index === -1) {\n      libraryFilms.push(filmDetails);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  } else {\n    addButton.textContent = 'Add to My Library';\n\n    const index = libraryFilms.findIndex(\n      film => film.title === filmDetails.title\n    );\n    if (index !== -1) {\n      libraryFilms.splice(index, 1);\n      localStorage.setItem('libraryFilms', JSON.stringify(libraryFilms));\n    }\n  }\n}\n\nfunction getLibraryFilms() {\n  const libraryFilmsString = localStorage.getItem('libraryFilms');\n  if (libraryFilmsString) {\n    return JSON.parse(libraryFilmsString);\n  } else {\n    return [];\n  }\n}\n\nfunction closeDetails() {\n  modalDetails.classList.toggle('more-details-is-hidden');\n  document.removeEventListener('keydown', escapeHandlerDetails);\n  window.removeEventListener('click', outsideClickHandlerDetails);\n  detailsOpened = false;\n  clearDetailsBox();\n}\n\nfunction escapeHandlerDetails(event) {\n  if (event.key === 'Escape') {\n    closeDetails();\n  }\n}\n\nfunction outsideClickHandlerDetails(event) {\n  if (event.target === modalDetails) {\n    closeDetails();\n  }\n}\n\nfunction clearDetailsBox() {\n  modalDetails.innerHTML = '';\n}\n"],"names":["$675cca1e6dc735c6$var$heroRandomFilm","document","getElementById","$675cca1e6dc735c6$var$heroContainer","$675cca1e6dc735c6$var$randomFilmIndex","async","$675cca1e6dc735c6$var$getRandomFilm","filmIndexes","response","fetch","results","json","map","id","classList","add","error","console","log","$675cca1e6dc735c6$var$fetchFilmData","randomIndex","Math","floor","random","length","$675cca1e6dc735c6$var$getFilmDetails","filmIndex","apiUrl","title","trailer_key","filmTrailer","backdrop_path","filmBackgroundPath","overview","vote_average","vote_count","release_date","popularity","genres","filmTrailerUrl","trailer","backgroundImage","window","addEventListener","filmBoxHTML","words","split","truncatedOverview","slice","join","$675cca1e6dc735c6$var$createFilmBox","markup","insertAdjacentHTML","$675cca1e6dc735c6$var$openModal","$675cca1e6dc735c6$var$openDetails","$675cca1e6dc735c6$var$modalHero","toggle","$675cca1e6dc735c6$var$escapeHandler","$675cca1e6dc735c6$var$outsideClickHandler","$675cca1e6dc735c6$var$closeModal","removeEventListener","event","key","target","$675cca1e6dc735c6$var$modalDetails","$675cca1e6dc735c6$var$escapeHandlerDetails","$675cca1e6dc735c6$var$outsideClickHandlerDetails","detailsBoxHTML","genre","name","$675cca1e6dc735c6$var$createDetailsBox","$675cca1e6dc735c6$var$clearDetailsBox","$675cca1e6dc735c6$var$closeDetails","$675cca1e6dc735c6$var$toggleLibraryFilm","addButton","querySelector","filmDetails4","libraryFilms","libraryFilmsString","localStorage","getItem","JSON","parse","$675cca1e6dc735c6$var$getLibraryFilms","textContent","findIndex","film","push","setItem","stringify","index","splice","detailsOpened","innerHTML"],"version":3,"file":"index.98677e22.js.map"}